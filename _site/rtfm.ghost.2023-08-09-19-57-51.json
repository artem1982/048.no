{"meta":{"exported_on":1691611071709,"version":"5.58.0"},"data":{"benefits":[],"custom_theme_settings":[{"id":"63a620b0b791c94772691353","theme":"casper","key":"navigation_layout","type":"select","value":"Logo on cover"},{"id":"63a620b0b791c94772691354","theme":"casper","key":"title_font","type":"select","value":"Modern sans-serif"},{"id":"63a620b0b791c94772691355","theme":"casper","key":"body_font","type":"select","value":"Elegant serif"},{"id":"63a620b0b791c94772691356","theme":"casper","key":"show_publication_cover","type":"boolean","value":"true"},{"id":"63a620b0b791c94772691357","theme":"casper","key":"header_style","type":"select","value":"Center aligned"},{"id":"63a620b1b791c94772691358","theme":"casper","key":"feed_layout","type":"select","value":"Grid"},{"id":"63a620b1b791c94772691359","theme":"casper","key":"color_scheme","type":"select","value":"Light"},{"id":"63a620b1b791c9477269135a","theme":"casper","key":"post_image_style","type":"select","value":"Wide"},{"id":"63a620b1b791c9477269135b","theme":"casper","key":"email_signup_text","type":"text","value":"Sign up for more like this."},{"id":"63a620b1b791c9477269135c","theme":"casper","key":"show_recent_posts_footer","type":"boolean","value":"true"}],"newsletters":[{"id":"63a620acb791c94772691165","uuid":"ca36f583-4dbc-48e0-97f7-fc2f249ecebc","name":"RTFM","description":null,"feedback_enabled":0,"slug":"default-newsletter","sender_name":null,"sender_email":null,"sender_reply_to":"newsletter","status":"active","visibility":"members","subscribe_on_signup":1,"sort_order":0,"header_image":null,"show_header_icon":1,"show_header_title":1,"title_font_category":"sans_serif","title_alignment":"center","show_feature_image":1,"body_font_category":"sans_serif","footer_content":null,"show_badge":1,"show_header_name":0,"created_at":"2022-12-23T21:42:04.000Z","updated_at":"2022-12-23T22:07:08.000Z"}],"offer_redemptions":[],"offers":[],"posts":[{"id":"63a620adb791c947726911d3","uuid":"44e895c3-ee3e-4590-90cb-ea7c2904b301","title":"Coming soon","slug":"coming-soon","mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"This is RTFM, a brand new IT blog!\"]]]],\"ghostVersion\":\"4.0\"}","lexical":null,"html":"<p>This is RTFM, a brand new IT blog!</p>","comment_id":"63a620adb791c947726911d3","plaintext":"This is RTFM, a brand new IT blog!","feature_image":null,"featured":0,"type":"post","status":"draft","locale":null,"visibility":"public","email_recipient_filter":"all","created_at":"2022-12-23T21:42:05.000Z","created_by":"1","updated_at":"2023-02-26T20:47:38.000Z","updated_by":"1","published_at":"2022-12-23T21:42:05.000Z","published_by":"1","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"newsletter_id":null},{"id":"63a620adb791c947726911d5","uuid":"21970482-2f7d-4efa-b55c-2ed3885d9ef1","title":"Artem Borodai","slug":"about","mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[[\"a\",[\"href\",\"https://www.linkedin.com/in/borodai/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"IT something . . \"]]],[1,\"p\",[[0,[0],1,\"https://www.linkedin.com/in/borodai/\"]]],[1,\"h3\",[]],[1,\"h3\",[]],[1,\"h3\",[]],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}","lexical":null,"html":"<p>IT something . . </p><p><a href=\"https://www.linkedin.com/in/borodai/\">https://www.linkedin.com/in/borodai/</a></p><h3></h3><h3></h3><h3></h3>","comment_id":"63a620adb791c947726911d5","plaintext":"IT something . .\n\nhttps://www.linkedin.com/in/borodai/\n\n\n\n\n\n\n\n\n","feature_image":null,"featured":0,"type":"page","status":"published","locale":null,"visibility":"public","email_recipient_filter":"all","created_at":"2022-12-23T21:42:05.000Z","created_by":"1","updated_at":"2023-02-24T20:01:52.000Z","updated_by":"1","published_at":"2022-12-23T21:42:06.000Z","published_by":"1","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"newsletter_id":null},{"id":"63f918215d7c8f03d10749c7","uuid":"206d1e57-c9dc-4a31-a1bb-d478e7d4ce39","title":"Delete all refresh tokens","slug":"delete-all-refresh-tokens","mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"bookmark\",{\"version\":\"1.0\",\"type\":\"bookmark\",\"url\":\"https://learn.microsoft.com/en-us/azure/active-directory/develop/refresh-tokens\",\"metadata\":{\"url\":\"https://learn.microsoft.com/en-us/azure/active-directory/develop/refresh-tokens\",\"title\":\"Microsoft identity platform refresh tokens - Microsoft Entra\",\"description\":\"Learn about refresh tokens emitted by the Azure AD.\",\"author\":\"SHERMANOUKO\",\"publisher\":\"Microsoft Learn\",\"thumbnail\":\"https://learn.microsoft.com/en-us/media/logos/logo-ms-social.png\",\"icon\":\"https://learn.microsoft.com/favicon.ico\"}}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/image.png\",\"width\":1887,\"height\":477}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/image-1.png\",\"width\":1852,\"height\":1426}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/image-2.png\",\"width\":3762,\"height\":1807}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/image-3.png\",\"width\":1782,\"height\":1221}],[\"markdown\",{\"markdown\":\"`Connect-MgGraph -Scopes Directory.ReadWrite.All,AppRoleAssignment.ReadWrite.All`\"}],[\"markdown\",{\"markdown\":\"```\\n$params = @{ \\n    PrincipalId = \\\"GUID of your MI\\\"\\n    ResourceId = \\\"GUID of MS Graph Enterpise app in your tenant\\\"\\n    AppRoleId = \\\"GUID of APP rolle\\\"\\n}\\n```\"}],[\"bookmark\",{\"version\":\"1.0\",\"type\":\"bookmark\",\"url\":\"https://learn.microsoft.com/en-us/graph/permissions-reference\",\"metadata\":{\"url\":\"https://learn.microsoft.com/en-us/graph/permissions-reference\",\"title\":\"Microsoft Graph permissions reference - Microsoft Graph\",\"description\":\"Microsoft Graph exposes granular permissions that control the access that apps have to resources, like users, groups, and mail. As a developer, you decide which permissions for Microsoft Graph your app requests.\",\"author\":\"FaithOmbongi\",\"publisher\":\"Microsoft Learn\",\"thumbnail\":\"https://learn.microsoft.com/en-us/media/logos/logo-ms-social.png\",\"icon\":\"https://learn.microsoft.com/favicon.ico\"}}],[\"markdown\",{\"markdown\":\"`New-MgServicePrincipalAppRoleAssignment -ServicePrincipalId YOURMIGUID -BodyParameter $params`\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/image-4.png\",\"width\":2763,\"height\":1599}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/image-5.png\",\"width\":3246,\"height\":1422}],[\"markdown\",{\"markdown\":\"```\\n'Microsoft.Graph.Users' = '2.0.0-preview5'\\n'Microsoft.Graph.Groups' = '2.0.0-preview5'\\n'Microsoft.Graph.Beta.Users.Actions' = '2.0.0-preview5'\\n'Microsoft.Graph.Authentication' = '2.0.0-preview5'\\n'Microsoft.Graph.Identity.Governance' = '2.0.0-preview5'\\n```\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/image-6.png\",\"width\":2770,\"height\":1459}],[\"markdown\",{\"markdown\":\"```\\n# Input bindings are passed in via param block.\\nparam($Timer)\\n\\n# Get the current universal time in the default string format.\\n$currentUTCtime = (Get-Date).ToUniversalTime()\\n\\n#Import-Modules needed\\nImport-Module Microsoft.Graph.Users\\nImport-Module Microsoft.Graph.Groups\\nImport-Module Microsoft.Graph.Beta.Users.Actions\\nImport-Module Microsoft.Graph.Authentication\\nImport-Module Microsoft.Graph.Identity.Governance\\n\\n# Authenticate with the Microsoft Graph API using the function's managed identity\\nConnect-MgGraph -Identity\\nGet-MgContext | Select-Object -ExpandProperty Scopes\\n\\n# Get assigned role assignments\\nWrite-Host -ForegroundColor Yellow \\\"Fetching assigned role assignments, might take a minute...\\\"\\n$assignedRoleAssignments = Get-MgRoleManagementDirectoryRoleAssignmentScheduleInstance -ExpandProperty \\\"*\\\" -All:$true$activatedRoleAssignments = $assignedRoleAssignments | Where-Object { $_.AssignmentType -eq 'Activated' }\\n$filteredAssignedRoleAssignments = $assignedRoleAssignments | Where-Object { $_.AssignmentType -eq 'Assigned' }\\nWrite-Host -ForegroundColor Yellow \\\"Found $($filteredAssignedRoleAssignments.count) assigned role assignments\\\"\\n\\n# Get eligible role assignments\\nWrite-Host -ForegroundColor Yellow \\\"Fetching eligible role assignments, might take a minute...\\\"\\n$eligibleRoleAssignments = Get-MgRoleManagementDirectoryRoleEligibilitySchedule -ExpandProperty \\\"*\\\" -All:$true\\nWrite-Host -ForegroundColor Yellow \\\"Found $($eligibleRoleAssignments.count) eligible PIM role assignments, whereof $($activatedRoleAssignments.count) are activated\\\"\\n\\n# Combine assignments\\n$allRoleAssignments = @(\\n\\t$eligibleRoleAssignments.PrincipalID #| Select-Object -First 10\\n\\t$filteredAssignedRoleAssignments.PrincipalID #| Select-Object -First 10\\n)\\n\\n#Loop through each PrincipalID in the array and filter out the ones that are not user-related\\n$userPrincipalIDs = @()\\nforeach ($id in $allRoleAssignments) {\\n\\t$user = Get-MGUser -UserId $id -ErrorAction SilentlyContinue\\n\\tif ($user) {\\n\\t\\t$userPrincipalIDs += $id\\n\\t\\t}\\n\\t}\\nforeach ($id in $allRoleAssignments) {\\n\\t$group = Get-MgGroupMember -GroupId $id -ErrorAction SilentlyContinue\\n\\t\\tforeach ($number in $group) {\\n\\t\\t\\t$userPrincipalIDs += $group.id\\n\\t\\t\\t}\\n\\t\\t}\\n#Deduplication - get unique user ids\\n$userPrincipalIDs = $userPrincipalIDs | Select-Object -Unique    \\n\\n# Loop through each admin user    \\nforeach ($user in $userPrincipalIDs)    { \\n       # Remove the user's refresh tokens\\n       Invoke-MgBetaInvalidateUserRefreshToken -UserId $user    \\n}\\n```\"}],[\"bookmark\",{\"version\":\"1.0\",\"type\":\"bookmark\",\"url\":\"https://learningbydoing.cloud/blog/building-a-comprehensive-report-on-azure-ad-admin-role-assignments/\",\"metadata\":{\"url\":\"https://learningbydoing.cloud/blog/building-a-comprehensive-report-on-azure-ad-admin-role-assignments/\",\"title\":\"Building a comprehensive report on Azure AD admin role assignments in Powershell\",\"description\":\"Keeping an eye on Azure AD administrative role assignments is crucial for tenant security and compliance. Forget about the built-in PIM report in the Azure AD portal - take reporting to the next level and build your own report with Graph, KQL and Powershell.\",\"author\":\"Stian A. Strysse\",\"publisher\":\"LearningByDoing.cloud\",\"thumbnail\":\"https://learningbydoing.cloud/assets/img/posts/2022-09-18/shareimg-unsplash.jpg\",\"icon\":null}}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"with Azure function please . . \"]]],[1,\"p\",[]],[1,\"p\",[[0,[],0,\"Refresh tokens. . .  not so many know that Microsoft Azure Active Directory IDP based on Oauth v.2 protocol and using refresh tokens as \\\"bearer\\\". We had Active Directory with NTLM/Kerberos and now it is tokens =) \"]]],[1,\"p\",[]],[1,\"p\",[[0,[],0,\"This area is grey and you will not get details of Microsoft implementation, but what you can get - Microsoft put responsibility on you! ->\"]]],[10,0],[1,\"p\",[[0,[],0,\"Here is important parts:\"]]],[10,1],[1,\"p\",[[0,[],0,\"\\\"Securely delete the old refresh token after acquiring new one\\\" . . jepp never heard that somebody did it =)\"]]],[1,\"p\",[[0,[],0,\"Every time when you access some Azure application (can be Teams or One Drive or whatever) - you are getting new \\\"refresh token\\\" (90 days default lifetime) and access token (ca 1,2 hour lifetime). EVERY TIME! It means that there is hundreds or thousands tokens out there making you life better and all your apps open automatically. It is good! But not good if it is your admin user. then things became really unpleasant. \"]]],[1,\"p\",[[0,[],0,\"How to delete all of them? Well, it is not so easy. Per today (26.02.2023) you can do this only through Graph API or PowerShell . . If you read document carefully - Microsoft point to right cmdlet:\"]]],[10,2],[1,\"p\",[[0,[],0,\"You see? Only PowerShell officially can revoke them . . but here we have problem! This PowerShell module is old AzureAD which will be retired in summer 2023. I will help you to use new one from Microsoft.Graph module. Let's start . . \"]]],[1,\"p\",[[0,[],0,\"We will create Azure Function with Powershell which will be killing every night ALL refresh tokens for all privileged roles, it will use managed identity to authenticate against AAD.\"]]],[3,\"ol\",[[[0,[],0,\"Create Azure Function(Windows/PowerShell core):\"]]]],[10,3],[1,\"p\",[[0,[],0,\"With time trigger it will run every day 0:10  . .\"]]],[1,\"p\",[[0,[],0,\"2. Create System assigned Managed Identity:\"]]],[10,4],[1,\"p\",[[0,[],0,\"  3. Add Application API permission to the MI:\"]]],[1,\"p\",[[0,[],0,\"Connect to MS Graph with proper right to adjust roles\"]]],[10,5],[1,\"p\",[[0,[],0,\"Create variables with GUIDs from your tenant\"]]],[10,6],[1,\"p\",[[0,[],0,\"Last part can be copied from this link:\"]]],[10,7],[1,\"p\",[[0,[],0,\"I will use Directory.ReadWrite.All \\\"19dbc75e-c2e2-444c-a770-ec69d8559fc7\\\" to delete tokens and RoleManagement.Read.All \\\"c7fbd983-d9aa-4fa7-84b8-17382c103bc4\\\" to read assignments to privileged roles.\"]]],[1,\"p\",[[0,[],0,\"If somebody knows which another role I can use to delete refresh tokens for privileged users with less permissions - will be glad to hear!\"]]],[1,\"p\",[[0,[],0,\"And actually put those permission to MI:\"]]],[10,8],[10,9],[1,\"p\",[[0,[],0,\"4. Add PowerShell Modules to file requrements.psd1\"]]],[10,10],[1,\"p\",[[0,[],0,\"I added those lines to import proper modules. You can see that I am using \\\"preview\\\". Because at this moment Microsoft support managed identity ONLY in v2 version of PowerShell MS.Graph.\"]]],[10,11],[1,\"p\",[[0,[],0,\"And actually put code:\"]]],[10,12],[10,13],[1,\"p\",[[0,[],0,\"Can answer some questions! It is mandatory to use \\\"Beta\\\" word when you are running command for beta graph. You have to do this to make this script work.\"]]],[1,\"p\",[[0,[],0,\"Part with getting principalsIDs was borrowed from:\"]]],[10,14],[1,\"p\",[[0,[],0,\"Thanks for code! =)\"]]],[1,\"p\",[[0,[],0,\"I want to say thanks to Mark Grote who went through the hell to make it work! =)\"]]]],\"ghostVersion\":\"4.0\"}","lexical":null,"html":"<p>with Azure function please . . </p><p></p><p>Refresh tokens. . .  not so many know that Microsoft Azure Active Directory IDP based on Oauth v.2 protocol and using refresh tokens as \"bearer\". We had Active Directory with NTLM/Kerberos and now it is tokens =) </p><p></p><p>This area is grey and you will not get details of Microsoft implementation, but what you can get - Microsoft put responsibility on you! -&gt;</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/refresh-tokens\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Microsoft identity platform refresh tokens - Microsoft Entra</div><div class=\"kg-bookmark-description\">Learn about refresh tokens emitted by the Azure AD.</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://learn.microsoft.com/favicon.ico\" alt=\"\"><span class=\"kg-bookmark-author\">Microsoft Learn</span><span class=\"kg-bookmark-publisher\">SHERMANOUKO</span></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://learn.microsoft.com/en-us/media/logos/logo-ms-social.png\" alt=\"\"></div></a></figure><p>Here is important parts:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1887\" height=\"477\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/image.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/02/image.png 1600w, __GHOST_URL__/content/images/2023/02/image.png 1887w\" sizes=\"(min-width: 720px) 720px\"></figure><p>\"Securely delete the old refresh token after acquiring new one\" . . jepp never heard that somebody did it =)</p><p>Every time when you access some Azure application (can be Teams or One Drive or whatever) - you are getting new \"refresh token\" (90 days default lifetime) and access token (ca 1,2 hour lifetime). EVERY TIME! It means that there is hundreds or thousands tokens out there making you life better and all your apps open automatically. It is good! But not good if it is your admin user. then things became really unpleasant. </p><p>How to delete all of them? Well, it is not so easy. Per today (26.02.2023) you can do this only through Graph API or PowerShell . . If you read document carefully - Microsoft point to right cmdlet:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/image-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1852\" height=\"1426\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/image-1.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-1.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/02/image-1.png 1600w, __GHOST_URL__/content/images/2023/02/image-1.png 1852w\" sizes=\"(min-width: 720px) 720px\"></figure><p>You see? Only PowerShell officially can revoke them . . but here we have problem! This PowerShell module is old AzureAD which will be retired in summer 2023. I will help you to use new one from Microsoft.Graph module. Let's start . . </p><p>We will create Azure Function with Powershell which will be killing every night ALL refresh tokens for all privileged roles, it will use managed identity to authenticate against AAD.</p><ol><li>Create Azure Function(Windows/PowerShell core):</li></ol><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/image-2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"2000\" height=\"961\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/image-2.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-2.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/02/image-2.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/02/image-2.png 2400w\" sizes=\"(min-width: 720px) 720px\"></figure><p>With time trigger it will run every day 0:10  . .</p><p>2. Create System assigned Managed Identity:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/image-3.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1782\" height=\"1221\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/image-3.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-3.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/02/image-3.png 1600w, __GHOST_URL__/content/images/2023/02/image-3.png 1782w\" sizes=\"(min-width: 720px) 720px\"></figure><p>  3. Add Application API permission to the MI:</p><p>Connect to MS Graph with proper right to adjust roles</p><!--kg-card-begin: markdown--><p><code>Connect-MgGraph -Scopes Directory.ReadWrite.All,AppRoleAssignment.ReadWrite.All</code></p>\n<!--kg-card-end: markdown--><p>Create variables with GUIDs from your tenant</p><!--kg-card-begin: markdown--><pre><code>$params = @{ \n    PrincipalId = &quot;GUID of your MI&quot;\n    ResourceId = &quot;GUID of MS Graph Enterpise app in your tenant&quot;\n    AppRoleId = &quot;GUID of APP rolle&quot;\n}\n</code></pre>\n<!--kg-card-end: markdown--><p>Last part can be copied from this link:</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://learn.microsoft.com/en-us/graph/permissions-reference\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Microsoft Graph permissions reference - Microsoft Graph</div><div class=\"kg-bookmark-description\">Microsoft Graph exposes granular permissions that control the access that apps have to resources, like users, groups, and mail. As a developer, you decide which permissions for Microsoft Graph your app requests.</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://learn.microsoft.com/favicon.ico\" alt=\"\"><span class=\"kg-bookmark-author\">Microsoft Learn</span><span class=\"kg-bookmark-publisher\">FaithOmbongi</span></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://learn.microsoft.com/en-us/media/logos/logo-ms-social.png\" alt=\"\"></div></a></figure><p>I will use Directory.ReadWrite.All \"19dbc75e-c2e2-444c-a770-ec69d8559fc7\" to delete tokens and RoleManagement.Read.All \"c7fbd983-d9aa-4fa7-84b8-17382c103bc4\" to read assignments to privileged roles.</p><p>If somebody knows which another role I can use to delete refresh tokens for privileged users with less permissions - will be glad to hear!</p><p>And actually put those permission to MI:</p><!--kg-card-begin: markdown--><p><code>New-MgServicePrincipalAppRoleAssignment -ServicePrincipalId YOURMIGUID -BodyParameter $params</code></p>\n<!--kg-card-end: markdown--><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/image-4.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"2000\" height=\"1157\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/image-4.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-4.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/02/image-4.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/02/image-4.png 2400w\" sizes=\"(min-width: 720px) 720px\"></figure><p>4. Add PowerShell Modules to file requrements.psd1</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/image-5.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"2000\" height=\"876\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/image-5.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-5.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/02/image-5.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/02/image-5.png 2400w\" sizes=\"(min-width: 720px) 720px\"></figure><p>I added those lines to import proper modules. You can see that I am using \"preview\". Because at this moment Microsoft support managed identity ONLY in v2 version of PowerShell MS.Graph.</p><!--kg-card-begin: markdown--><pre><code>'Microsoft.Graph.Users' = '2.0.0-preview5'\n'Microsoft.Graph.Groups' = '2.0.0-preview5'\n'Microsoft.Graph.Beta.Users.Actions' = '2.0.0-preview5'\n'Microsoft.Graph.Authentication' = '2.0.0-preview5'\n'Microsoft.Graph.Identity.Governance' = '2.0.0-preview5'\n</code></pre>\n<!--kg-card-end: markdown--><p>And actually put code:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/image-6.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"2000\" height=\"1053\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/image-6.png 600w, __GHOST_URL__/content/images/size/w1000/2023/02/image-6.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/02/image-6.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/02/image-6.png 2400w\" sizes=\"(min-width: 720px) 720px\"></figure><!--kg-card-begin: markdown--><pre><code># Input bindings are passed in via param block.\nparam($Timer)\n\n# Get the current universal time in the default string format.\n$currentUTCtime = (Get-Date).ToUniversalTime()\n\n#Import-Modules needed\nImport-Module Microsoft.Graph.Users\nImport-Module Microsoft.Graph.Groups\nImport-Module Microsoft.Graph.Beta.Users.Actions\nImport-Module Microsoft.Graph.Authentication\nImport-Module Microsoft.Graph.Identity.Governance\n\n# Authenticate with the Microsoft Graph API using the function's managed identity\nConnect-MgGraph -Identity\nGet-MgContext | Select-Object -ExpandProperty Scopes\n\n# Get assigned role assignments\nWrite-Host -ForegroundColor Yellow &quot;Fetching assigned role assignments, might take a minute...&quot;\n$assignedRoleAssignments = Get-MgRoleManagementDirectoryRoleAssignmentScheduleInstance -ExpandProperty &quot;*&quot; -All:$true$activatedRoleAssignments = $assignedRoleAssignments | Where-Object { $_.AssignmentType -eq 'Activated' }\n$filteredAssignedRoleAssignments = $assignedRoleAssignments | Where-Object { $_.AssignmentType -eq 'Assigned' }\nWrite-Host -ForegroundColor Yellow &quot;Found $($filteredAssignedRoleAssignments.count) assigned role assignments&quot;\n\n# Get eligible role assignments\nWrite-Host -ForegroundColor Yellow &quot;Fetching eligible role assignments, might take a minute...&quot;\n$eligibleRoleAssignments = Get-MgRoleManagementDirectoryRoleEligibilitySchedule -ExpandProperty &quot;*&quot; -All:$true\nWrite-Host -ForegroundColor Yellow &quot;Found $($eligibleRoleAssignments.count) eligible PIM role assignments, whereof $($activatedRoleAssignments.count) are activated&quot;\n\n# Combine assignments\n$allRoleAssignments = @(\n\t$eligibleRoleAssignments.PrincipalID #| Select-Object -First 10\n\t$filteredAssignedRoleAssignments.PrincipalID #| Select-Object -First 10\n)\n\n#Loop through each PrincipalID in the array and filter out the ones that are not user-related\n$userPrincipalIDs = @()\nforeach ($id in $allRoleAssignments) {\n\t$user = Get-MGUser -UserId $id -ErrorAction SilentlyContinue\n\tif ($user) {\n\t\t$userPrincipalIDs += $id\n\t\t}\n\t}\nforeach ($id in $allRoleAssignments) {\n\t$group = Get-MgGroupMember -GroupId $id -ErrorAction SilentlyContinue\n\t\tforeach ($number in $group) {\n\t\t\t$userPrincipalIDs += $group.id\n\t\t\t}\n\t\t}\n#Deduplication - get unique user ids\n$userPrincipalIDs = $userPrincipalIDs | Select-Object -Unique    \n\n# Loop through each admin user    \nforeach ($user in $userPrincipalIDs)    { \n       # Remove the user's refresh tokens\n       Invoke-MgBetaInvalidateUserRefreshToken -UserId $user    \n}\n</code></pre>\n<!--kg-card-end: markdown--><p>Can answer some questions! It is mandatory to use \"Beta\" word when you are running command for beta graph. You have to do this to make this script work.</p><p>Part with getting principalsIDs was borrowed from:</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://learningbydoing.cloud/blog/building-a-comprehensive-report-on-azure-ad-admin-role-assignments/\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Building a comprehensive report on Azure AD admin role assignments in Powershell</div><div class=\"kg-bookmark-description\">Keeping an eye on Azure AD administrative role assignments is crucial for tenant security and compliance. Forget about the built-in PIM report in the Azure AD portal - take reporting to the next level and build your own report with Graph, KQL and Powershell.</div><div class=\"kg-bookmark-metadata\"><span class=\"kg-bookmark-author\">LearningByDoing.cloud</span><span class=\"kg-bookmark-publisher\">Stian A. Strysse</span></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://learningbydoing.cloud/assets/img/posts/2022-09-18/shareimg-unsplash.jpg\" alt=\"\"></div></a></figure><p>Thanks for code! =)</p><p>I want to say thanks to Mark Grote who went through the hell to make it work! =)</p>","comment_id":"63f918215d7c8f03d10749c7","plaintext":"with Azure function please . .\n\n\n\nRefresh tokens. . .  not so many know that Microsoft Azure Active Directory IDP based on Oauth v.2 protocol and using refresh tokens as \"bearer\". We had Active Directory with NTLM/Kerberos and now it is tokens =)\n\n\n\nThis area is grey and you will not get details of Microsoft implementation, but what you can get - Microsoft put responsibility on you! ->\n\nMicrosoft identity platform refresh tokens - Microsoft EntraLearn about refresh tokens emitted by the Azure AD.Microsoft LearnSHERMANOUKO\n\nHere is important parts:\n\n\"Securely delete the old refresh token after acquiring new one\" . . jepp never heard that somebody did it =)\n\nEvery time when you access some Azure application (can be Teams or One Drive or whatever) - you are getting new \"refresh token\" (90 days default lifetime) and access token (ca 1,2 hour lifetime). EVERY TIME! It means that there is hundreds or thousands tokens out there making you life better and all your apps open automatically. It is good! But not good if it is your admin user. then things became really unpleasant.\n\nHow to delete all of them? Well, it is not so easy. Per today (26.02.2023) you can do this only through Graph API or PowerShell . . If you read document carefully - Microsoft point to right cmdlet:\n\nYou see? Only PowerShell officially can revoke them . . but here we have problem! This PowerShell module is old AzureAD which will be retired in summer 2023. I will help you to use new one from Microsoft.Graph module. Let's start . .\n\nWe will create Azure Function with Powershell which will be killing every night ALL refresh tokens for all privileged roles, it will use managed identity to authenticate against AAD.\n\n 1. Create Azure Function(Windows/PowerShell core):\n\nWith time trigger it will run every day 0:10  . .\n\n2. Create System assigned Managed Identity:\n\n 3. Add Application API permission to the MI:\n\nConnect to MS Graph with proper right to adjust roles\n\nConnect-MgGraph -Scopes Directory.ReadWrite.All,AppRoleAssignment.ReadWrite.All\n\n\nCreate variables with GUIDs from your tenant\n\n$params = @{ \n    PrincipalId = \"GUID of your MI\"\n    ResourceId = \"GUID of MS Graph Enterpise app in your tenant\"\n    AppRoleId = \"GUID of APP rolle\"\n}\n\n\n\nLast part can be copied from this link:\n\nMicrosoft Graph permissions reference - Microsoft GraphMicrosoft Graph exposes granular permissions that control the access that apps have to resources, like users, groups, and mail. As a developer, you decide which permissions for Microsoft Graph your app requests.Microsoft LearnFaithOmbongi\n\nI will use Directory.ReadWrite.All \"19dbc75e-c2e2-444c-a770-ec69d8559fc7\" to delete tokens and RoleManagement.Read.All \"c7fbd983-d9aa-4fa7-84b8-17382c103bc4\" to read assignments to privileged roles.\n\nIf somebody knows which another role I can use to delete refresh tokens for privileged users with less permissions - will be glad to hear!\n\nAnd actually put those permission to MI:\n\nNew-MgServicePrincipalAppRoleAssignment -ServicePrincipalId YOURMIGUID -BodyParameter $params\n\n\n4. Add PowerShell Modules to file requrements.psd1\n\nI added those lines to import proper modules. You can see that I am using \"preview\". Because at this moment Microsoft support managed identity ONLY in v2 version of PowerShell MS.Graph.\n\n'Microsoft.Graph.Users' = '2.0.0-preview5'\n'Microsoft.Graph.Groups' = '2.0.0-preview5'\n'Microsoft.Graph.Beta.Users.Actions' = '2.0.0-preview5'\n'Microsoft.Graph.Authentication' = '2.0.0-preview5'\n'Microsoft.Graph.Identity.Governance' = '2.0.0-preview5'\n\n\n\nAnd actually put code:\n\n# Input bindings are passed in via param block.\nparam($Timer)\n\n# Get the current universal time in the default string format.\n$currentUTCtime = (Get-Date).ToUniversalTime()\n\n#Import-Modules needed\nImport-Module Microsoft.Graph.Users\nImport-Module Microsoft.Graph.Groups\nImport-Module Microsoft.Graph.Beta.Users.Actions\nImport-Module Microsoft.Graph.Authentication\nImport-Module Microsoft.Graph.Identity.Governance\n\n# Authenticate with the Microsoft Graph API using the function's managed identity\nConnect-MgGraph -Identity\nGet-MgContext | Select-Object -ExpandProperty Scopes\n\n# Get assigned role assignments\nWrite-Host -ForegroundColor Yellow \"Fetching assigned role assignments, might take a minute...\"\n$assignedRoleAssignments = Get-MgRoleManagementDirectoryRoleAssignmentScheduleInstance -ExpandProperty \"*\" -All:$true$activatedRoleAssignments = $assignedRoleAssignments | Where-Object { $_.AssignmentType -eq 'Activated' }\n$filteredAssignedRoleAssignments = $assignedRoleAssignments | Where-Object { $_.AssignmentType -eq 'Assigned' }\nWrite-Host -ForegroundColor Yellow \"Found $($filteredAssignedRoleAssignments.count) assigned role assignments\"\n\n# Get eligible role assignments\nWrite-Host -ForegroundColor Yellow \"Fetching eligible role assignments, might take a minute...\"\n$eligibleRoleAssignments = Get-MgRoleManagementDirectoryRoleEligibilitySchedule -ExpandProperty \"*\" -All:$true\nWrite-Host -ForegroundColor Yellow \"Found $($eligibleRoleAssignments.count) eligible PIM role assignments, whereof $($activatedRoleAssignments.count) are activated\"\n\n# Combine assignments\n$allRoleAssignments = @(\n\t$eligibleRoleAssignments.PrincipalID #| Select-Object -First 10\n\t$filteredAssignedRoleAssignments.PrincipalID #| Select-Object -First 10\n)\n\n#Loop through each PrincipalID in the array and filter out the ones that are not user-related\n$userPrincipalIDs = @()\nforeach ($id in $allRoleAssignments) {\n\t$user = Get-MGUser -UserId $id -ErrorAction SilentlyContinue\n\tif ($user) {\n\t\t$userPrincipalIDs += $id\n\t\t}\n\t}\nforeach ($id in $allRoleAssignments) {\n\t$group = Get-MgGroupMember -GroupId $id -ErrorAction SilentlyContinue\n\t\tforeach ($number in $group) {\n\t\t\t$userPrincipalIDs += $group.id\n\t\t\t}\n\t\t}\n#Deduplication - get unique user ids\n$userPrincipalIDs = $userPrincipalIDs | Select-Object -Unique    \n\n# Loop through each admin user    \nforeach ($user in $userPrincipalIDs)    { \n       # Remove the user's refresh tokens\n       Invoke-MgBetaInvalidateUserRefreshToken -UserId $user    \n}\n\n\n\nCan answer some questions! It is mandatory to use \"Beta\" word when you are running command for beta graph. You have to do this to make this script work.\n\nPart with getting principalsIDs was borrowed from:\n\nBuilding a comprehensive report on Azure AD admin role assignments in PowershellKeeping an eye on Azure AD administrative role assignments is crucial for tenant security and compliance. Forget about the built-in PIM report in the Azure AD portal - take reporting to the next level and build your own report with Graph, KQL and Powershell.LearningByDoing.cloudStian A. Strysse\n\nThanks for code! =)\n\nI want to say thanks to Mark Grote who went through the hell to make it work! =)","feature_image":null,"featured":0,"type":"post","status":"published","locale":null,"visibility":"public","email_recipient_filter":"all","created_at":"2023-02-24T20:03:45.000Z","created_by":"1","updated_at":"2023-02-26T20:12:09.000Z","updated_by":"1","published_at":"2023-02-26T20:12:09.000Z","published_by":"1","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"newsletter_id":null}],"posts_authors":[{"id":"63a620adb791c947726911d4","post_id":"63a620adb791c947726911d3","author_id":"1","sort_order":0},{"id":"63a620adb791c947726911d6","post_id":"63a620adb791c947726911d5","author_id":"1","sort_order":0},{"id":"63f918215d7c8f03d10749c8","post_id":"63f918215d7c8f03d10749c7","author_id":"1","sort_order":0}],"posts_meta":[],"posts_products":[{"id":"63aeff79b791c9477269136b","post_id":"63a620adb791c947726911d5","product_id":"63a620acb791c94772691163","sort_order":0},{"id":"63aeff79b791c9477269136c","post_id":"63a620adb791c947726911d5","product_id":"63a620acb791c94772691164","sort_order":1},{"id":"63af002fb791c94772691373","post_id":"63a620adb791c947726911d3","product_id":"63a620acb791c94772691163","sort_order":0},{"id":"63af002fb791c94772691374","post_id":"63a620adb791c947726911d3","product_id":"63a620acb791c94772691164","sort_order":1},{"id":"63f918325d7c8f03d10749cb","post_id":"63f918215d7c8f03d10749c7","product_id":"63a620acb791c94772691163","sort_order":0},{"id":"63f918325d7c8f03d10749cc","post_id":"63f918215d7c8f03d10749c7","product_id":"63a620acb791c94772691164","sort_order":1}],"posts_tags":[{"id":"63a620aeb791c947726912fe","post_id":"63a620adb791c947726911d3","tag_id":"63a620acb791c94772691166","sort_order":0}],"products":[{"id":"63a620acb791c94772691163","name":"Free","slug":"free","active":1,"welcome_page_url":null,"visibility":"public","trial_days":0,"description":null,"type":"free","currency":null,"monthly_price":null,"yearly_price":null,"created_at":"2022-12-23T21:42:04.000Z","updated_at":"2022-12-23T21:42:04.000Z","monthly_price_id":null,"yearly_price_id":null},{"id":"63a620acb791c94772691164","name":"RTFM","slug":"default-product","active":1,"welcome_page_url":null,"visibility":"public","trial_days":0,"description":null,"type":"paid","currency":"USD","monthly_price":500,"yearly_price":5000,"created_at":"2022-12-23T21:42:04.000Z","updated_at":"2022-12-23T22:07:08.000Z","monthly_price_id":null,"yearly_price_id":null}],"products_benefits":[],"roles":[{"id":"63a620abb791c94772691159","name":"Administrator","description":"Administrators","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c9477269115a","name":"Editor","description":"Editors","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c9477269115b","name":"Author","description":"Authors","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c9477269115c","name":"Contributor","description":"Contributors","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c9477269115d","name":"Owner","description":"Blog Owner","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c9477269115e","name":"Admin Integration","description":"External Apps","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c9477269115f","name":"Ghost Explore Integration","description":"Internal Integration for the Ghost Explore directory","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c94772691160","name":"DB Backup Integration","description":"Internal DB Backup Client","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"},{"id":"63a620abb791c94772691161","name":"Scheduler Integration","description":"Internal Scheduler Client","created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2022-12-23T21:42:03.000Z","updated_by":"1"}],"roles_users":[{"id":"63a620acb791c94772691162","role_id":"63a620abb791c9477269115d","user_id":"1"}],"settings":[{"id":"63a620afb791c947726912ff","group":"core","key":"db_hash","value":"29cb457a-b4e5-46c7-b4f6-0715ce16dc4b","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691300","group":"core","key":"routes_hash","value":"3d180d52c663d173a6be791ef411ed01","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:10.000Z","updated_by":"1"},{"id":"63a620afb791c94772691301","group":"core","key":"next_update_check","value":"1680282546","type":"number","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-03-30T17:09:06.000Z","updated_by":"1"},{"id":"63a620afb791c94772691302","group":"core","key":"notifications","value":"[{\"dismissible\":true,\"location\":\"bottom\",\"status\":\"alert\",\"id\":\"63a628e4b791c94772691364\",\"createdAtVersion\":\"5.26.3\",\"type\":\"warn\",\"message\":\"Ghost is currently unable to send email. See https://ghost.org/docs/concepts/config/#mail for instructions.\",\"seen\":false,\"addedAt\":\"2022-12-23T22:17:08.812Z\"}]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T22:17:08.000Z","updated_by":"1"},{"id":"63a620afb791c94772691303","group":"core","key":"version_notifications","value":"[]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691304","group":"core","key":"admin_session_secret","value":"0d420f012ea592d4cf1e0a11edd5e2340d70947897dc8e5b6840aa23fbc1468a","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691305","group":"core","key":"theme_session_secret","value":"d0974b0b07d7d45bb2cb70af6004d3f3a481e03682360b848eff30805295abac","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691306","group":"core","key":"ghost_public_key","value":"-----BEGIN RSA PUBLIC KEY-----\nMIGJAoGBAJRZK4IFVOBFwkb0BfTT4quQmfm/P++WqZOue5OMdz/W/YBhwoEHVuVvfebklNfD\noq16Tq8xMcDyfhti2PCwNgFz3HO5w7qMenYICWuuBdw/fQaED6CTXCORsJvOSu3YnWQ3N3Te\nDklKfdPOyImClDJuQ4zDvvnTQji15B9PoF6jAgMBAAE=\n-----END RSA PUBLIC KEY-----\n","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691307","group":"core","key":"ghost_private_key","value":"-----BEGIN RSA PRIVATE KEY-----\nMIICXAIBAAKBgQCUWSuCBVTgRcJG9AX00+KrkJn5vz/vlqmTrnuTjHc/1v2AYcKBB1blb33m\n5JTXw6Ktek6vMTHA8n4bYtjwsDYBc9xzucO6jHp2CAlrrgXcP30GhA+gk1wjkbCbzkrt2J1k\nNzd03g5JSn3TzsiJgpQybkOMw77500I4teQfT6BeowIDAQABAoGAVSv5EdZzy6vhhhE2lkFM\nw8nqzXwjfjBXPiYQZz9fe/S4aQw3uxL2rhXcCEO2vUZiUQ2GvYkWErxm8NxIx6+z4S4rJlod\ng4Z3DsViMSObKEXfSu1OVFkdygDwN9bmKNBD3mbuSUjTvzsm9JOnoqGEioWaM17Y0QKZ7xnF\ne5BkzYkCQQD0AImRrr4l9JInXbjGke2y1gj9SuMMJ0K5h4dP2hsKxm4yfOsNS7ocmwPo84GQ\nUD0eqrGCR61sGLzPJ0i6dOyHAkEAm6SOjP6HlRcAyIElOg96JWBQzjfr2B1E1s/U5JAptDEz\nIwVBGPk0oyUrcXYlT0wMKBHmYtmh2MvsLT8XYZpABQJBAIwAHu7y53FZsd5afSGaK1uYSVIj\n/MBFapiPNclQaIG3NxVK7YcUczXkj8rCpQ2LrHYDFJSe0debHgJyFN2/JtMCP0mQfdAmfe75\n8GTUpcPLjPAdlhPiWpbLPr5JfVaKzSteFc13rk0ffMGfz+jQ7tGMIDLQQxR1yQmvWPIJ4ANB\n5QJBAPASEAFusZkHFTAVWF0KNGMqGDBfvWtZhDxRA8hPd70tj06bTGV827HA9mxjMa70VOWI\nkzsDVG7CqgAUx8Cja48=\n-----END RSA PRIVATE KEY-----\n","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691308","group":"core","key":"members_public_key","value":"-----BEGIN RSA PUBLIC KEY-----\nMIGJAoGBAJ52HvFxTBMZ1bH6KbtNWpGeYI3rklqzJ656V18IbpN7lAsuZQMvNrwy3h7yYdTv\nSL9ishwB+nLQe2B5n597TkbL0wN3N9Y/dXPm7+JdiV0vbd9slyK3YFOiPvP3sDnhQfHSeHkz\nCGV4G+/E8FQz9muCwi4zJq9CH6d1ck+j6/ZjAgMBAAE=\n-----END RSA PUBLIC KEY-----\n","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691309","group":"core","key":"members_private_key","value":"-----BEGIN RSA PRIVATE KEY-----\nMIICXAIBAAKBgQCedh7xcUwTGdWx+im7TVqRnmCN65JasyeueldfCG6Te5QLLmUDLza8Mt4e\n8mHU70i/YrIcAfpy0HtgeZ+fe05Gy9MDdzfWP3Vz5u/iXYldL23fbJcit2BToj7z97A54UHx\n0nh5MwhleBvvxPBUM/ZrgsIuMyavQh+ndXJPo+v2YwIDAQABAoGAfULmhvmGp3q+oCgeoP8u\n3vmRXd6gHK6OabAwLOFfd5oylvwfwXqrC+4yA8iaaVaV7SQ5o0Y1ElmXjdXWxp0UbEeidkAV\nCGT0whLr+qq08hZwkZHTUtNkO0SamNZO0jl+40EuE95yzwBFqw6cdsqz/7iZWCgFZtlCpa6K\nwpjCkAECQQDS7bRH5x6X4kKsAYBNgW0iSKmqmjRZ/LZcLaEIoVKiUf5FgM92UjsAdJqApeZE\n8QOrbyWlh8j5pT6d74K2exwBAkEAwFJW5BHKMfid4Dl578ZUi4QvkazlKQD9BrVQ1Yq8J3/J\nA4cKcKDzIwqwwKa1zqFqvmdrGZiemSfhsgrOGJgiYwJAPa6Pots+ghIDh0NlHsUzgewX2bEA\nkDQrq+cYCWsLvDYYEoEpqiM/59ExgV+CaDTG6vI04yRDLGYbWpo48l4sAQJAYve8SR8yeqai\nr6lEK3RXO3hpdkCPqJsemh4iG9GJ45WpnowWfkEE/WpZ7LmdY1jDcnoLrh9QtiXEyfcveY6I\nWwJBAMzMP9ip7AAZPfhrgVCiSwlV3tu4HoYuvkhfAcU2knSVx0EogBJMtmXGf2jDXuNAFbmH\nw0ssc/PauUG0qdwzb7U=\n-----END RSA PRIVATE KEY-----\n","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269130a","group":"core","key":"members_email_auth_secret","value":"f2e9e7741eeb137b5484b1d8fc502972dfd4dc7544df833d6354fbcf8fa484a94258c3d6aaca00829df1627798ef2edf16bd340ee78e03717a88ee199ae35f47","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269130d","group":"site","key":"title","value":"RTFM","type":"string","flags":"PUBLIC","created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T22:07:08.000Z","updated_by":"1"},{"id":"63a620afb791c9477269130e","group":"site","key":"description","value":"IT blog","type":"string","flags":"PUBLIC","created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-30T14:12:39.000Z","updated_by":"1"},{"id":"63a620afb791c9477269130f","group":"site","key":"logo","value":"","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691310","group":"site","key":"cover_image","value":"__GHOST_URL__/content/images/2023/02/gUAno_Table_in_the_office_with_a_lot_of_ols_PC_PIC_microcontrol_aa9deca6-fbe0-4506-9270-28b5f8fa9ee5.png","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-02-24T19:27:52.000Z","updated_by":"1"},{"id":"63a620afb791c94772691311","group":"site","key":"icon","value":"__GHOST_URL__/content/images/2023/02/im.jpg","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-02-24T19:50:06.000Z","updated_by":"1"},{"id":"63a620afb791c94772691312","group":"site","key":"accent_color","value":"#1ab2ff","type":"string","flags":"PUBLIC","created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-02-24T18:59:21.000Z","updated_by":"1"},{"id":"63a620afb791c94772691313","group":"site","key":"locale","value":"en","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691314","group":"site","key":"timezone","value":"Europe/Paris","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-30T14:12:56.000Z","updated_by":"1"},{"id":"63a620afb791c94772691315","group":"site","key":"codeinjection_head","value":"","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691316","group":"site","key":"codeinjection_foot","value":"","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691317","group":"site","key":"facebook","value":"ghost","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691318","group":"site","key":"twitter","value":"@artem_od","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-02-27T08:29:00.000Z","updated_by":"1"},{"id":"63a620afb791c94772691319","group":"site","key":"navigation","value":"[{\"label\":\"Home\",\"url\":\"/\"},{\"label\":\"About\",\"url\":\"/about/\"}]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269131a","group":"site","key":"secondary_navigation","value":"[]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-02-24T19:54:10.000Z","updated_by":"1"},{"id":"63a620afb791c9477269131b","group":"site","key":"meta_title","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269131c","group":"site","key":"meta_description","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269131d","group":"site","key":"og_image","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269131e","group":"site","key":"og_title","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269131f","group":"site","key":"og_description","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691320","group":"site","key":"twitter_image","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691321","group":"site","key":"twitter_title","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691322","group":"site","key":"twitter_description","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691323","group":"theme","key":"active_theme","value":"casper","type":"string","flags":"RO","created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691324","group":"private","key":"is_private","value":"false","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691325","group":"private","key":"password","value":"","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691326","group":"private","key":"public_hash","value":"910b34f6d6147013a2c41ccd4a2dc4","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691327","group":"members","key":"default_content_visibility","value":"public","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691328","group":"members","key":"default_content_visibility_tiers","value":"[]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691329","group":"members","key":"members_signup_access","value":"all","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269132a","group":"members","key":"members_support_address","value":"noreply","type":"string","flags":"PUBLIC,RO","created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269132d","group":"members","key":"stripe_plans","value":"[]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691330","group":"members","key":"stripe_connect_livemode","value":null,"type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691331","group":"members","key":"stripe_connect_display_name","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691333","group":"members","key":"members_monthly_price_id","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691334","group":"members","key":"members_yearly_price_id","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691335","group":"members","key":"members_track_sources","value":"true","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691336","group":"portal","key":"portal_name","value":"true","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691337","group":"portal","key":"portal_button","value":"true","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691338","group":"portal","key":"portal_plans","value":"[\"free\"]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691339","group":"portal","key":"portal_products","value":"[]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269133a","group":"portal","key":"portal_button_style","value":"icon-and-text","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269133b","group":"portal","key":"portal_button_icon","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269133c","group":"portal","key":"portal_button_signup_text","value":"Subscribe","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269133d","group":"email","key":"mailgun_domain","value":"sandboxc1c8820fdea643dca75359ccc1317d34.mailgun.org","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-03-03T13:32:13.000Z","updated_by":"1"},{"id":"63a620afb791c9477269133e","group":"email","key":"mailgun_api_key","value":"e7abc9441684e7c6a954714c8a4fb832-15b35dee-6395c32b","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-03-03T13:32:13.000Z","updated_by":"1"},{"id":"63a620afb791c9477269133f","group":"email","key":"mailgun_base_url","value":"https://api.mailgun.net/v3","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-03-03T13:32:13.000Z","updated_by":"1"},{"id":"63a620afb791c94772691340","group":"email","key":"email_track_opens","value":"true","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691341","group":"email","key":"email_track_clicks","value":"true","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691343","group":"amp","key":"amp","value":"false","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691344","group":"amp","key":"amp_gtag_id","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691345","group":"firstpromoter","key":"firstpromoter","value":"false","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691346","group":"firstpromoter","key":"firstpromoter_id","value":null,"type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691347","group":"labs","key":"labs","value":"{}","type":"object","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691348","group":"slack","key":"slack_url","value":"","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c94772691349","group":"slack","key":"slack_username","value":"Ghost","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269134a","group":"unsplash","key":"unsplash","value":"false","type":"boolean","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2023-02-24T19:54:56.000Z","updated_by":"1"},{"id":"63a620afb791c9477269134b","group":"views","key":"shared_views","value":"[]","type":"array","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269134c","group":"editor","key":"editor_default_email_recipients","value":"visibility","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269134d","group":"editor","key":"editor_default_email_recipients_filter","value":"all","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-23T21:42:07.000Z","updated_by":"1"},{"id":"63a620afb791c9477269134e","group":"comments","key":"comments_enabled","value":"all","type":"string","flags":null,"created_at":"2022-12-23T21:42:07.000Z","created_by":"1","updated_at":"2022-12-30T14:14:38.000Z","updated_by":"1"},{"id":"63f9080d433948498a7a4d79","group":"analytics","key":"outbound_link_tagging","value":"true","type":"boolean","flags":null,"created_at":"2023-02-24T18:55:09.000Z","created_by":"1","updated_at":null,"updated_by":null}],"snippets":[],"stripe_prices":[],"stripe_products":[],"tags":[{"id":"63a620acb791c94772691166","name":"News","slug":"news","description":null,"feature_image":null,"parent_id":null,"visibility":"public","og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"created_at":"2022-12-23T21:42:04.000Z","created_by":"1","updated_at":"2022-12-23T21:42:04.000Z","updated_by":"1"}],"users":[{"id":"1","name":"Artem Borodai","slug":"artem","password":"$2a$10$8V4npq/78992YjCoCZrkhu..FSJ8lR8hF3NzOgkX/5GCXUDpFN0s.","email":"artem.boroday@gmail.com","profile_image":null,"cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"accessibility":"{\"nightShift\":true,\"navigation\":{\"expanded\":{\"posts\":true}},\"whatsNew\":{\"lastSeenDate\":\"2023-02-14T16:17:02.000+00:00\"}}","status":"active","locale":null,"visibility":"public","meta_title":null,"meta_description":null,"tour":null,"last_seen":"2023-05-08T09:28:53.000Z","comment_notifications":1,"free_member_signup_notification":1,"paid_subscription_started_notification":1,"paid_subscription_canceled_notification":0,"created_at":"2022-12-23T21:42:03.000Z","created_by":"1","updated_at":"2023-05-08T09:28:53.000Z","updated_by":"1","mention_notifications":1,"milestone_notifications":1}]}}